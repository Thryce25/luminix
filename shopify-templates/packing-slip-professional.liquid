<div class="wrapper">
  <!-- Header -->
  <div class="invoice-header">
    <div class="brand-logo">
      <img src="https://cdn.shopify.com/s/files/1/YOUR_STORE_ID/files/White_logo.png" alt="{{ shop.name }}" class="logo-image">
    </div>
    <div class="document-type">TAX INVOICE</div>
  </div>

  <!-- Address Section -->
  <div class="address-section">
    <div class="address-column">
      <h3>Sold By:</h3>
      <p class="company-name">{{ shop.name }}</p>
      <p>{{ shop_address.address1 }}</p>
      {% if shop_address.address2 != blank %}
        <p>{{ shop_address.address2 }}</p>
      {% endif %}
      <p>{{ shop_address.city }}, {{ shop_address.province_code }} {{ shop_address.zip }}</p>
      <p>{{ shop_address.country }}</p>
      {% if shop.phone != blank %}
        <p>Ph: {{ shop.phone }}</p>
      {% endif %}
      {% if shop.email != blank %}
        <p>{{ shop.email }}</p>
      {% endif %}
    </div>

    <div class="address-column">
      <h3>Delivered To:</h3>
      {% if shipping_address != blank %}
        <p class="company-name">{{ shipping_address.name }}</p>
        {% if shipping_address.company != blank %}
          <p>{{ shipping_address.company }}</p>
        {% endif %}
        <p>{{ shipping_address.address1 }}</p>
        {% if shipping_address.address2 != blank %}
          <p>{{ shipping_address.address2 }}</p>
        {% endif %}
        <p>{{ shipping_address.city }}, {{ shipping_address.province_code }} {{ shipping_address.zip }}</p>
        <p>{{ shipping_address.country }}</p>
        {% if shipping_address.phone != blank %}
          <p>Ph: {{ shipping_address.phone }}</p>
        {% endif %}
      {% else %}
        <p>No shipping address</p>
      {% endif %}
    </div>
  </div>

  <!-- Order Details -->
  <div class="order-details">
    <div class="detail-row">
      <span class="detail-label">Invoice Number:</span>
      <span class="detail-value">{{ order.name }}</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">Invoice Date:</span>
      <span class="detail-value">{{ order.created_at | date: "%d/%m/%Y" }}</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">Order No.:</span>
      <span class="detail-value">{{ order.order_number }}</span>
    </div>
    <div class="detail-row">
      <span class="detail-label">Order Date:</span>
      <span class="detail-value">{{ order.created_at | date: "%d/%m/%Y" }}</span>
    </div>
    {% if order.po_number != blank %}
    <div class="detail-row">
      <span class="detail-label">PO Number:</span>
      <span class="detail-value">{{ order.po_number }}</span>
    </div>
    {% endif %}
  </div>

  <!-- Items Table -->
  <table class="items-table">
    <thead>
      <tr>
        <th class="col-description">Description</th>
        <th class="col-hsn">HSN</th>
        <th class="col-qty">Qty</th>
        <th class="col-unit-price">Unit Price</th>
        <th class="col-discount">Discount</th>
        <th class="col-taxable">Taxable Value</th>
        <th class="col-tax">CGST</th>
        <th class="col-tax">SGST</th>
        <th class="col-total">Total</th>
      </tr>
    </thead>
    <tbody>
      {% for line_item in line_items_in_shipment %}
        <tr>
          <td class="item-description">
            {{ line_item.title }}
            {% if line_item.variant_title != blank %}
              <br><small>{{ line_item.variant_title }}</small>
            {% endif %}
            {% if line_item.sku != blank %}
              <br><small>SKU: {{ line_item.sku }}</small>
            {% endif %}
          </td>
          <td class="text-center">â€”</td>
          <td class="text-center">{{ line_item.shipping_quantity }}</td>
          <td class="text-right">{{ line_item.price | money_without_currency }}</td>
          <td class="text-center">0</td>
          <td class="text-right">{{ line_item.line_price | money_without_currency }}</td>
          <td class="text-center">0</td>
          <td class="text-center">0</td>
          <td class="text-right total-amount">{{ line_item.line_price | money_without_currency }}</td>
        </tr>
      {% endfor %}
      <tr class="total-row">
        <td colspan="8" class="text-right"><strong>Total</strong></td>
        <td class="text-right total-amount"><strong>{{ order.total_price | money_without_currency }}</strong></td>
      </tr>
    </tbody>
  </table>

  <!-- Amount in Words -->
  <div class="amount-words">
    <strong>Net Amount Payable (In Words):</strong> {{ order.total_price | money_without_currency }} Only
  </div>

  {% unless includes_all_line_items_in_order %}
    <div class="partial-notice">
      There are other items from your order not included in this shipment.
    </div>
  {% endunless %}

  {% if order.note != blank %}
    <div class="notes-box">
      <strong>Order Notes:</strong><br>
      {{ order.note }}
    </div>
  {% endif %}

  {% if delivery_method.instructions != blank %}
    <div class="notes-box">
      <strong>Delivery Instructions:</strong><br>
      {{ delivery_method.instructions }}
    </div>
  {% endif %}

  <!-- Footer -->
  <div class="invoice-footer">
    <div class="footer-left">
      <p class="footer-note">All disputes are subject to {{ shop_address.province }} jurisdiction only.</p>
      <p class="footer-note">All prices include any exchange/return as per the store's exchange/return policy.</p>
      <p class="footer-note">Whether tax is payable under reverse charge: No</p>
    </div>
    <div class="footer-right">
      <p><strong>Authorised Signature for</strong></p>
      <p class="company-name">{{ shop.name }}</p>
    </div>
  </div>
</div>

<style type="text/css">
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: Arial, sans-serif;
    font-size: 11px;
    line-height: 1.4;
    color: #000000;
  }

  .wrapper {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    border: 2px solid #000000;
  }

  /* Header */
  .invoice-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 10px;
    border-bottom: 2px solid #000000;
    margin-bottom: 15px;
  }

  .brand-logo {
    font-size: 16px;
    font-weight: bold;
    text-transform: uppercase;
  }

  .logo-image {
    height: 40px;
    width: auto;
    display: block;
  }

  .document-type {
    font-size: 14px;
    font-weight: bold;
    text-transform: uppercase;
  }

  /* Address Section */
  .address-section {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid #000000;
  }

  .address-column {
    flex: 1;
    font-size: 10px;
    line-height: 1.6;
  }

  .address-column h3 {
    font-size: 11px;
    font-weight: bold;
    margin-bottom: 8px;
    text-transform: uppercase;
  }

  .address-column p {
    margin: 2px 0;
  }

  .company-name {
    font-weight: bold;
  }

  /* Order Details */
  .order-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 5px;
    margin-bottom: 15px;
    padding: 10px;
    background: #f9f9f9;
    border: 1px solid #000000;
  }

  .detail-row {
    display: flex;
    font-size: 10px;
  }

  .detail-label {
    font-weight: bold;
    min-width: 120px;
  }

  .detail-value {
    flex: 1;
  }

  /* Items Table */
  .items-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 15px;
    font-size: 10px;
  }

  .items-table th,
  .items-table td {
    border: 1px solid #000000;
    padding: 6px 8px;
  }

  .items-table thead {
    background: #f0f0f0;
  }

  .items-table th {
    font-weight: bold;
    text-align: left;
    font-size: 9px;
    text-transform: uppercase;
  }

  .col-description {
    width: 35%;
  }

  .col-hsn {
    width: 8%;
  }

  .col-qty {
    width: 6%;
  }

  .col-unit-price {
    width: 10%;
  }

  .col-discount {
    width: 8%;
  }

  .col-taxable {
    width: 10%;
  }

  .col-tax {
    width: 8%;
  }

  .col-total {
    width: 10%;
  }

  .text-center {
    text-align: center;
  }

  .text-right {
    text-align: right;
  }

  .item-description {
    font-size: 10px;
  }

  .item-description small {
    font-size: 9px;
    color: #666666;
  }

  .total-row {
    font-weight: bold;
    background: #f9f9f9;
  }

  .total-amount {
    font-weight: bold;
  }

  /* Amount in Words */
  .amount-words {
    padding: 10px;
    border: 1px solid #000000;
    margin-bottom: 15px;
    font-size: 10px;
    background: #f9f9f9;
  }

  /* Partial Notice */
  .partial-notice {
    padding: 10px;
    background: #fff3cd;
    border: 1px solid #ffc107;
    margin-bottom: 15px;
    font-size: 10px;
    text-align: center;
  }

  /* Notes Box */
  .notes-box {
    padding: 10px;
    border: 1px solid #000000;
    margin-bottom: 10px;
    font-size: 10px;
  }

  /* Footer */
  .invoice-footer {
    display: flex;
    justify-content: space-between;
    padding-top: 15px;
    border-top: 1px solid #000000;
    margin-top: 20px;
    font-size: 9px;
  }

  .footer-left {
    flex: 1;
  }

  .footer-right {
    flex: 0 0 200px;
    text-align: right;
  }

  .footer-note {
    margin: 3px 0;
    line-height: 1.4;
  }

  /* Print Optimization */
  @media print {
    body {
      margin: 0;
      padding: 0;
    }

    .wrapper {
      border: 2px solid #000000;
      page-break-inside: avoid;
    }

    .items-table {
      page-break-inside: avoid;
    }
  }
</style>
