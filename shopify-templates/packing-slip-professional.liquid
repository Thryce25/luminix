<div class="wrapper">
  <!-- Header Section -->
  <div class="header">
    <div class="brand-section">
      <h1 class="brand-name">{{ shop.name }}</h1>
      <p class="brand-tagline">Premium Quality Fashion</p>
    </div>
    <div class="document-info">
      <div class="document-badge">PACKING SLIP</div>
      <p class="order-number">Order #{{ order.name }}</p>
      {% if order.po_number != blank %}
        <p class="po-number">PO #{{ order.po_number }}</p>
      {% endif %}
      <p class="order-date">{{ order.created_at | date: "%B %d, %Y" }}</p>
    </div>
  </div>

  <div class="divider"></div>

  <!-- Customer Information -->
  <div class="customer-section">
    <div class="address-block shipping-address">
      <div class="address-header">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <h3>
          {% if delivery_method.instructions != blank %}
            Delivery Address
          {% else %}
            Shipping Address
          {% endif %}
        </h3>
      </div>
      <div class="address-content">
        {% if shipping_address != blank %}
          <p class="recipient-name">{{ shipping_address.name }}</p>
          {% if shipping_address.company != blank %}
            <p class="company-name">{{ shipping_address.company }}</p>
          {% endif %}
          <p>{{ shipping_address.address1 }}</p>
          {% if shipping_address.address2 != blank %}
            <p>{{ shipping_address.address2 }}</p>
          {% endif %}
          <p>{{ shipping_address.city_province_zip }}</p>
          <p>{{ shipping_address.country }}</p>
          {% if shipping_address.phone != blank %}
            <p class="phone">{{ shipping_address.phone }}</p>
          {% endif %}
        {% else %}
          <p class="no-address">No shipping address provided</p>
        {% endif %}
      </div>
    </div>

    <div class="address-block billing-address">
      <div class="address-header">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
          <line x1="1" y1="10" x2="23" y2="10"></line>
        </svg>
        <h3>Billing Address</h3>
      </div>
      <div class="address-content">
        {% if billing_address != blank %}
          <p class="recipient-name">{{ billing_address.name }}</p>
          {% if billing_address.company != blank %}
            <p class="company-name">{{ billing_address.company }}</p>
          {% endif %}
          <p>{{ billing_address.address1 }}</p>
          {% if billing_address.address2 != blank %}
            <p>{{ billing_address.address2 }}</p>
          {% endif %}
          <p>{{ billing_address.city_province_zip }}</p>
          <p>{{ billing_address.country }}</p>
        {% else %}
          <p class="no-address">No billing address provided</p>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- Order Items -->
  <div class="items-section">
    <div class="items-header">
      <div class="header-col-product">Product Details</div>
      <div class="header-col-sku">SKU</div>
      <div class="header-col-qty">Quantity</div>
    </div>

    {% assign desired_image_size = 70 %}
    {% assign resolution_adjusted_size = desired_image_size | times: 300 | divided_by: 72 | ceil %}
    {% capture effective_image_dimensions %}
      {{ resolution_adjusted_size }}x{{ resolution_adjusted_size }}
    {% endcapture %}

    {% for line_item in line_items_in_shipment %}
      <div class="item-row">
        <div class="item-product">
          <div class="item-image">
            {% if line_item.image != blank %}
              <div class="image-container">
                {{ line_item.image | img_url: effective_image_dimensions | img_tag: line_item.title, 'product-image' }}
              </div>
            {% else %}
              <div class="image-placeholder">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <circle cx="8.5" cy="8.5" r="1.5"></circle>
                  <polyline points="21 15 16 10 5 21"></polyline>
                </svg>
              </div>
            {% endif %}
          </div>
          <div class="item-details">
            <p class="item-title">{{ line_item.title }}</p>
            {% if line_item.variant_title != blank %}
              <p class="item-variant">{{ line_item.variant_title }}</p>
            {% endif %}
            {% for group in line_item.groups %}
              <p class="item-group">
                {% if group.deliverable? %}
                  For: {{ group.title }}
                {% else %}
                  Part of: {{ group.title }}
                {% endif %}
              </p>
            {% endfor %}
          </div>
        </div>
        <div class="item-sku">
          {% if line_item.sku != blank %}
            <span class="sku-badge">{{ line_item.sku }}</span>
          {% else %}
            <span class="sku-none">—</span>
          {% endif %}
        </div>
        <div class="item-quantity">
          <span class="qty-badge">{{ line_item.shipping_quantity }} / {{ line_item.quantity }}</span>
        </div>
      </div>
    {% endfor %}
  </div>

  {% unless includes_all_line_items_in_order %}
    <div class="partial-shipment-notice">
      <svg class="notice-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
      <p>This is a partial shipment. Additional items from your order will be shipped separately.</p>
    </div>
  {% endunless %}

  <!-- Notes Section -->
  {% if order.note != blank %}
    <div class="notes-section">
      <h3 class="notes-title">Order Notes</h3>
      <p class="notes-content">{{ order.note }}</p>
    </div>
  {% endif %}

  {% if delivery_method.instructions != blank %}
    <div class="notes-section">
      <h3 class="notes-title">Delivery Instructions</h3>
      <p class="notes-content">{{ delivery_method.instructions }}</p>
    </div>
  {% endif %}

  <div class="divider"></div>

  <!-- Footer -->
  <div class="footer">
    <div class="footer-content">
      <div class="thank-you">
        <h2>Thank You for Your Order!</h2>
        <p>We appreciate your business and hope you love your purchase.</p>
      </div>
      <div class="contact-info">
        <p class="company-name"><strong>{{ shop.name }}</strong></p>
        <p>{{ shop_address.summary }}</p>
        <p>{{ shop.email }} • {{ shop.domain }}</p>
      </div>
    </div>
    <div class="footer-bar">
      <p>For questions about your order, please contact us at {{ shop.email }}</p>
    </div>
  </div>
</div>

<style type="text/css">
  /* Reset and Base Styles */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
    font-size: 14px;
    line-height: 1.6;
    color: #1a1a1a;
    background: #ffffff;
  }

  .wrapper {
    max-width: 850px;
    margin: 0 auto;
    padding: 48px;
  }

  /* Header Section */
  .header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 32px;
  }

  .brand-section {
    flex: 1;
  }

  .brand-name {
    font-size: 32px;
    font-weight: 700;
    color: #000000;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 4px;
  }

  .brand-tagline {
    font-size: 12px;
    color: #666666;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .document-info {
    text-align: right;
  }

  .document-badge {
    display: inline-block;
    background: #000000;
    color: #ffffff;
    padding: 6px 16px;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    margin-bottom: 12px;
  }

  .order-number {
    font-size: 18px;
    font-weight: 700;
    color: #000000;
    margin-bottom: 4px;
  }

  .po-number,
  .order-date {
    font-size: 13px;
    color: #666666;
    margin-bottom: 2px;
  }

  /* Divider */
  .divider {
    height: 2px;
    background: #000000;
    margin: 32px 0;
  }

  /* Customer Section */
  .customer-section {
    display: flex;
    gap: 48px;
    margin-bottom: 32px;
  }

  .address-block {
    flex: 1;
  }

  .address-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid #e0e0e0;
  }

  .address-header .icon {
    width: 18px;
    height: 18px;
    color: #000000;
  }

  .address-header h3 {
    font-size: 13px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #000000;
  }

  .address-content {
    font-size: 14px;
    line-height: 1.8;
    color: #333333;
  }

  .address-content p {
    margin-bottom: 2px;
  }

  .recipient-name {
    font-weight: 700;
    color: #000000;
    font-size: 15px;
    margin-bottom: 4px !important;
  }

  .company-name {
    font-weight: 600;
    color: #444444;
    margin-bottom: 8px !important;
  }

  .phone {
    margin-top: 8px !important;
    font-weight: 500;
  }

  .no-address {
    color: #999999;
    font-style: italic;
  }

  /* Items Section */
  .items-section {
    margin-bottom: 32px;
  }

  .items-header {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    background: #f5f5f5;
    border-bottom: 2px solid #000000;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #000000;
  }

  .header-col-product {
    flex: 5;
  }

  .header-col-sku {
    flex: 2;
    text-align: center;
  }

  .header-col-qty {
    flex: 1.5;
    text-align: center;
  }

  .item-row {
    display: flex;
    align-items: center;
    padding: 20px 16px;
    border-bottom: 1px solid #e0e0e0;
    page-break-inside: avoid;
  }

  .item-row:last-child {
    border-bottom: none;
  }

  .item-product {
    flex: 5;
    display: flex;
    gap: 16px;
    align-items: flex-start;
  }

  .item-image {
    width: 70px;
    min-width: 70px;
  }

  .image-container {
    width: 70px;
    height: 70px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    overflow: hidden;
    background: #f9f9f9;
  }

  .product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .image-placeholder {
    width: 70px;
    height: 70px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    background: #f5f5f5;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .image-placeholder svg {
    width: 30px;
    height: 30px;
    color: #cccccc;
  }

  .item-details {
    flex: 1;
  }

  .item-title {
    font-size: 15px;
    font-weight: 600;
    color: #000000;
    margin-bottom: 4px;
  }

  .item-variant {
    font-size: 13px;
    color: #666666;
    margin-bottom: 2px;
  }

  .item-group {
    font-size: 12px;
    color: #888888;
    font-style: italic;
  }

  .item-sku {
    flex: 2;
    text-align: center;
  }

  .sku-badge {
    display: inline-block;
    background: #f0f0f0;
    padding: 4px 12px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
    color: #333333;
    font-family: 'Courier New', monospace;
  }

  .sku-none {
    color: #cccccc;
    font-size: 18px;
  }

  .item-quantity {
    flex: 1.5;
    text-align: center;
  }

  .qty-badge {
    display: inline-block;
    background: #000000;
    color: #ffffff;
    padding: 6px 14px;
    border-radius: 4px;
    font-size: 13px;
    font-weight: 700;
  }

  /* Partial Shipment Notice */
  .partial-shipment-notice {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 20px;
    background: #fff3cd;
    border-left: 4px solid #ffc107;
    border-radius: 4px;
    margin: 24px 0;
  }

  .notice-icon {
    width: 20px;
    height: 20px;
    color: #856404;
    flex-shrink: 0;
  }

  .partial-shipment-notice p {
    font-size: 13px;
    color: #856404;
    font-weight: 500;
  }

  /* Notes Section */
  .notes-section {
    margin: 24px 0;
    padding: 20px;
    background: #f9f9f9;
    border-left: 4px solid #000000;
    border-radius: 4px;
  }

  .notes-title {
    font-size: 13px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #000000;
    margin-bottom: 12px;
  }

  .notes-content {
    font-size: 14px;
    color: #333333;
    line-height: 1.8;
  }

  /* Footer */
  .footer {
    margin-top: 48px;
  }

  .footer-content {
    text-align: center;
    margin-bottom: 24px;
  }

  .thank-you h2 {
    font-size: 24px;
    font-weight: 700;
    color: #000000;
    margin-bottom: 8px;
  }

  .thank-you p {
    font-size: 14px;
    color: #666666;
    margin-bottom: 24px;
  }

  .contact-info {
    font-size: 13px;
    line-height: 1.8;
    color: #666666;
  }

  .contact-info .company-name {
    font-size: 16px;
    color: #000000;
    margin-bottom: 8px;
  }

  .footer-bar {
    padding: 16px;
    background: #f5f5f5;
    border-radius: 4px;
    text-align: center;
  }

  .footer-bar p {
    font-size: 12px;
    color: #666666;
  }

  /* Print Optimization */
  @media print {
    body {
      margin: 0;
      padding: 0;
    }

    .wrapper {
      padding: 24px;
    }

    .item-row {
      page-break-inside: avoid;
    }

    .divider {
      background: #000000;
    }
  }

  /* Responsive for smaller slips */
  @media (max-width: 600px) {
    .wrapper {
      padding: 24px;
    }

    .header {
      flex-direction: column;
      gap: 24px;
    }

    .document-info {
      text-align: left;
    }

    .customer-section {
      flex-direction: column;
      gap: 24px;
    }

    .brand-name {
      font-size: 24px;
    }
  }
</style>
